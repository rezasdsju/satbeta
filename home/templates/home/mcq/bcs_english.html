  {% extends 'base.html' %}

  {% block title %}BCS English | SAT{% endblock %}


  {% block extra_css %}
  <style>
    /* Your existing CSS remains the same */
    :root{
      --bg:#0f172a;
      --card:#111827;
      --muted:#94a3b8;
      --text:#e5e7eb;
      --accent:#22c55e;
      --accent-weak:#16a34a;
      --danger:#ef4444;
      --warning:#f59e0b;
      --info:#60a5fa;
      --ring: rgba(34,197,94,0.4);
    }  
    *{box-sizing:border-box}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: linear-gradient(180deg, #0b1220, var(--bg));
      color: var(--text);
    }
    .container { max-width: 950px; width: 100%; margin: 0 auto; padding: 0 20px; flex: 1; }
    header{ width: 100%; position: sticky; top: 0; z-index: 10; backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(2,6,23,0.92), rgba(2,6,23,0.6));
      border-bottom: 1px solid rgba(148,163,184,0.15);
    }
    .header-inner{ display:flex; align-items:center; gap:16px; padding:14px 24px;}
    .brand{ font-weight:700; letter-spacing:0.3px; }
    .pill{ padding: 6px 10px; background: #0b1324; border:1px solid rgba(148,163,184,0.15); border-radius: 9999px; color: var(--muted); font-size:12px; }
    .timer{ margin-left:auto; font-variant-numeric: tabular-nums; font-weight:700; padding:6px 12px; border-radius:10px; background:#0b1a2f; border:1px solid rgba(96,165,250,0.3); color:#bfdbfe; }
    .controls{ display:flex; gap:8px; }
    button{ background: #0b1220; color: var(--text); border:1px solid rgba(148,163,184,0.2); border-radius:12px; padding:10px 14px; cursor:pointer; font-weight:600;}
    button:hover{ border-color: rgba(148,163,184,0.35); }
    button.primary{ background: linear-gradient(180deg, var(--accent), var(--accent-weak)); border-color: transparent; color:#052e16; }
    button.primary:hover{ filter: brightness(0.98); }

    .card{ background: #0b1220; border:1px solid rgba(148,163,184,0.15); border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.35); }
    .intro{ padding: 20px; margin-top: 16px; }
    .intro p{ color: var(--muted); margin:8px 0 0; }

    .meta{ display:flex; flex-wrap:wrap; gap:12px; margin-top:10px; }
    .meta .chip{ font-size: 13px; padding:6px 10px; border-radius:8px; background:#091225; border:1px solid rgba(148,163,184,0.2); color:#cbd5e1 }

    .question{ padding: 20px; border-top: 1px solid rgba(148,163,184,0.12); }
    .q-head{ display:flex; gap:10px; align-items:flex-start; }
    .q-num{ width:34px; height:34px; border-radius:50%; display:grid; place-content:center; background:#0b1a2f; color:#bfdbfe; font-weight:700; border:1px solid rgba(96,165,250,0.35) }
    /*.q-text{ font-weight:600; line-height:1.4 }*/

    .q-text{
      font-weight:600;
      line-height:1.4;
      display: flex;
      /*justify-content: center;*/
      align-items: center;
      flex-wrap: wrap;
      width: 100%;
    }
    .nowrap {
      white-space: nowrap;
    }

    .bcs-tag {
      padding: 4px 8px;
      background: #1e293b;
      border: 1px solid rgba(148, 163, 184, 0.25);
      border-radius: 8px;
      font-size: 13px;
      color: #cbd5e1;
      white-space: nowrap;
      margin-left: 10px;
      text-align: right;
    }
    @media (max-width: 640px) {
        .q-text .bcs-tag {
            margin-top: 5px;
            margin-left: 0;
        }
    }


    .options{ margin-top:12px; display:grid; gap:10px; }

    .option{ display:flex; align-items:flex-start; gap:12px; padding:12px; border:1px solid rgba(148,163,184,0.18); border-radius:12px; cursor:pointer; background:#0a1020; }
    .option:hover{ border-color: rgba(148,163,184,0.32) }
    .option input{ appearance:none; -webkit-appearance:none; width:18px; height:18px; border-radius: 50%; border:2px solid #93c5fd; margin-top:3px; display:inline-grid; place-content:center; outline:none; }
    .option input::before{ content:""; width:10px; height:10px; border-radius:50%; transform: scale(0); transition:120ms transform ease-in-out; background: #60a5fa; }
    .option input:checked::before{ transform: scale(1); }
    .option .opt-text{ flex:1; }

    .actions{ position:sticky; bottom:0; background:linear-gradient(180deg, rgba(2,6,23,0), rgba(2,6,23,0.9) 25%, rgba(2,6,23,1)); padding:16px 24px; display:flex; gap:10px; justify-content:space-between; align-items:center; border-top:1px solid rgba(148,163,184,0.15);}

    .result{ padding: 18px 20px; border-top: 1px solid rgba(148,163,184,0.12); background:#081427; }
    .result strong{ color:#bbf7d0 }
    .legend{ display:flex; gap:10px; flex-wrap:wrap; color:var(--muted); font-size:14px }
    .legend span{ display:inline-flex; align-items:center; gap:6px; padding:4px 8px; background:#0b1324; border:1px solid rgba(148,163,184,0.2); border-radius:9999px }
    .dot{ width:10px; height:10px; border-radius:50% }
    .dot.correct{ background: var(--accent) }
    .dot.wrong{ background: var(--danger) }
    .dot.unanswered{ background: #facc15; }

    .unanswered-chip { color: #facc15; border-color: rgba(250, 204, 21, 0.4); }
    .correct-chip { color: #22c55e; border-color: rgba(250, 204, 21, 0.4); }
    .wrong-chip { color: #ef4444; border-color: rgba(250, 204, 21, 0.4); }

    .correct{ border-color: rgba(34,197,94,0.6) !important; background: rgba(34,197,94,0.06) }
    .wrong{ border-color: rgba(239,68,68,0.6) !important; background: rgba(239,68,68,0.06) }

    .explanation-container { margin-top: 12px; padding: 12px; border-radius: 8px; background: rgba(30, 41, 59, 0.4); }
    .result-status { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; font-weight: 600;}
    .correct-status { color: var(--accent); }
    .wrong-status { color: var(--danger); }
    .unanswered-status { color: #facc15; }
    .explain{ color:#cbd5e1; font-size:14px; opacity:0.95; margin: 0; }

    .hidden{ display:none !important }
    .mute{ color: var(--muted) }
    .footer-note{ text-align:center; color:var(--muted); margin: 16px 0 40px; font-size:13px }
    .score-badge{ font-weight:800; color:#052e16; background:linear-gradient(180deg, #86efac, #22c55e); border-radius:9999px; padding:6px 12px; border:1px solid var(--accent-weak) }

    .back-button {
        display: inline-block;
        margin: 30px auto;
        padding: 12px 30px;
        background: linear-gradient(135deg, #2c3e50 0%, #4a6491 100%);
        color: white;
        text-decoration: none;
        border-radius: 50px;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 10px;
        max-width: 200px;
        justify-content: center;
    }

    .back-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        background: linear-gradient(135deg, #4a6491 0%, #2c3e50 100%);
    }

    .button-container { display: flex; justify-content: center; gap: 20px; margin-top: 20px; }
    /* Feedback Section Styles */
    .feedback-section {
      margin: 40px 0;
      padding: 20px;
      background: #0b1220;
      border: 1px solid rgba(148,163,184,0.15);
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.35);
    }
    .feedback-section h2 {
      margin-top: 0;
      color: var(--text);
      border-bottom: 1px solid rgba(148,163,184,0.2);
      padding-bottom: 10px;
      text-align: center;
    }
    .feedback-inner {
       max-width: 600px;   /* sub-container width */
       width: 80%;         /* responsive */
       margin: 0 auto;     /* horizontally center */
    }
    @media (max-width:640px){
       .feedback-inner { width: 95%; }
    }
    .feedback-form {
      display: grid;
      gap: 15px;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    .form-group label {
      font-weight: 600;
      color: var(--muted);
    }
    .form-control {
      padding: 12px 15px;
      background: #091225;
      border: 1px solid rgba(148,163,184,0.2);
      border-radius: 8px;
      color: var(--text);
      font-family: inherit;
      font-size: 16px;
    }

    .form-control:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--ring);
    }
    textarea.form-control {
      min-height: 120px;
      resize: vertical;
    }
    
    .submit-feedback {
      background: linear-gradient(180deg, var(--accent), var(--accent-weak));
      color: #052e16;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .submit-feedback:hover {
      filter: brightness(0.98);
      transform: translateY(-2px);
    }
    
    .form-status {
      padding: 10px 15px;
      border-radius: 8px;
      margin-top: 15px;
      display: none;
    }

    .form-status.success {
      background: rgba(34, 197, 94, 0.1);
      border: 1px solid rgba(34, 197, 94, 0.3);
      color: var(--accent);
      display: block;
    }
    
    .form-status.error {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: var(--danger);
      display: block;
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    
    .modal-content {
      background: var(--card);
      border-radius: 16px;
      padding: 25px;
      width: 90%;
      max-width: 450px;
      border: 1px solid rgba(148,163,184,0.15);
      box-shadow: 0 10px 40px rgba(0,0,0,0.5);
    }
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    .modal-title {
      margin: 0;
      color: var(--text);
    }
    
    .close-modal {
      background: none;
      border: none;
      color: var(--muted);
      font-size: 24px;
      cursor: pointer;
    }
    
    .modal-body {
      margin-bottom: 20px;
    }
    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }

    @media (max-width:640px){
        .q-head{ flex-direction:column; }
        .button-container { flex-direction: column; align-items: center; }
        header{ width: 100%; }
        .header-inner { flex-wrap: wrap; }
        .timer { order: 3; width: 100%; margin-top: 10px; text-align: center; }
    }
  </style>
  {% endblock %}

  {% block content %}
  <script>
    {% if user.is_authenticated %}
        window.USERNAME = "{{ user.username|escapejs }}";
    {% else %}
        window.USERNAME = null;
    {% endif %}
</script>


  <header>
    <div class="header-inner container">
      <div class="brand">üìù BCS English MCQ</div>
      <span class="pill">10 Questions ‚Ä¢ 10 Minutes </span>
      <div id="timer" class="timer" aria-live="polite">10:00</div>
      <div class="controls">
        <button id="startBtn" class="primary">Start Exam</button>
        <button id="resetBtn" title="Start a new exam">New Exam</button>
        <button id="rankingBtn" title="View Exam Ranking">Ranking</button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="card intro" id="intro">
      <h2 style="margin:0 0 6px">Instructions</h2>
      <ul>
        <!--<li>There are numerous varieties of questions in the main pool. The questions will be randomly appeared to you for each exam</li>-->
        <li>‡¶Æ‡ßÇ‡¶≤ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡¶≠‡¶æ‡¶£‡ßç‡¶°‡¶æ‡¶∞‡ßá ‡¶Ö‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶∞‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ‡ßü ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶è‡¶≤‡ßã‡¶Æ‡ßá‡¶≤‡ßã‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡¶¨‡ßá‡•§</li><br>

        <!--<li>Sometimes a specific question can take first position of the 10 questions but next 9 questions are automatic randomly selected from the main pool.So don't be confused</li>-->
        <li>‡¶ï‡¶ñ‡¶®‡ßã ‡¶ï‡¶ñ‡¶®‡ßã ‡¶è‡¶ï‡¶ü‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶®‡ßá ‡¶Ü‡¶∏‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶¨‡¶æ‡¶ï‡¶ø ‡ßØ‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶∏‡ßç‡¶¨‡ßü‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡ßü‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡¶≠‡¶æ‡¶£‡ßç‡¶°‡¶æ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶è‡¶≤‡ßã‡¶Æ‡ßá‡¶≤‡ßã‡¶≠‡¶æ‡¶¨‡ßá ‡¶¨‡¶æ‡¶õ‡¶æ‡¶á ‡¶π‡¶¨‡ßá‡•§ ‡¶§‡¶æ‡¶á ‡¶¨‡¶ø‡¶≠‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶§ ‡¶π‡¶¨‡ßá‡¶® ‡¶®‡¶æ‡•§</li><br>

        <!--<li>Click on <strong>Start Exam</strong> to participate in the Exam</li>-->
        <li>‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ‡ßü ‡¶Ö‡¶Ç‡¶∂ ‡¶®‡¶ø‡¶§‡ßá <strong>Start Exam-‡¶è ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</strong></li><br>

        <!--<li>Click on <strong>New Exam</strong> and then <strong>Start Exam</strong> to participate in another Exam with different questions type</li>-->
        <li>‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶∏‡ßá‡¶ü ‡¶®‡¶ø‡ßü‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶ö‡¶æ‡¶á‡¶≤‡ßá <strong>New Exam-‡¶è ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶§‡¶æ‡¶∞‡¶™‡¶∞ Start Exam-‡¶è ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</strong></li><br>

        <!--<li>Scoring: Correct +1, Wrong ‚àí0.25, Unanswered 0.</li>-->
        <li>‡¶∏‡ßç‡¶ï‡ßã‡¶∞‡¶ø‡¶Ç: ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø +1, ‡¶≠‡ßÅ‡¶≤ ‡¶â‡¶§‡ßç‡¶§‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‚àí0.25, ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶®‡¶æ ‡¶¶‡¶ø‡¶≤‡ßá 0‡•§</li><br>

        <!--<li>Time limit: 10 minutes. Auto-submit when time ends.</li>-->
        <li>‡¶∏‡¶Æ‡ßü‡¶∏‡ßÄ‡¶Æ‡¶æ: ‡ßß‡ß¶ ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡•§ ‡¶∏‡¶Æ‡ßü ‡¶∂‡ßá‡¶∑ ‡¶π‡¶≤‡ßá ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡ßç‡¶¨‡ßü‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡ßü‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá‡•§ <strong>Submit Exam</strong> ‡¶¨‡¶æ‡¶ü‡¶® ‡¶è ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶ì ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§</li><br>

        <!--<li>All questions appear on one page ‚Äî scroll to navigate.</li>-->
        <li>‡¶∏‡¶¨ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶è‡¶ï ‡¶™‡¶æ‡¶§‡¶æ‡ßü ‡¶•‡¶æ‡¶ï‡¶¨‡ßá ‚Äî ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</li><br>

      </ul>
    </section>

    <div id="summary" class="card result hidden" role="status" aria-live="polite"></div>

    <form id="exam" class="card" autocomplete="off"></form>

    <div class="actions">
      <div class="legend">
        <span><span class="dot correct"></span> Correct</span>
        <span><span class="dot wrong"></span> Wrong</span>
        <span><span class="dot unanswered"></span> Unanswered</span>
      </div>
      <button id="submitBtn" class="primary" disabled>Submit Exam</button>
    </div>

    <!-- Modal for submitting marks -->
    <div id="markModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Submit Your Score</h3>
          <button class="close-modal">&times;</button>
        </div>
        <div class="modal-body">
          <form id="markForm">
            <div class="form-group">
              <label for="studentName">Your Name</label>
              <input type="text" id="studentName" name="studentName" class="form-control" placeholder="Enter your name" required>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button id="cancelMarkBtn">Cancel</button>
          <button id="submitMarkBtn" class="primary">Submit</button>
        </div>
      </div>
    </div>

    <!-- Feedback Section -->
    <section class="feedback-section">
      <h2>Send Us Your Feedback</h2>
      <div class='feedback-inner'>
      <form id="feedbackForm" class="feedback-form" action="https://formspree.io/f/xwpnvyaw" method="POST">
        <div class="form-group">
          <label for="name">Your Name</label>
          <input type="text" id="name" name="name" class="form-control" placeholder="Enter your name">
        </div>
        
        <div class="form-group">
          <label for="email">Your Email(Optional)</label>
          <input type="email" id="email" name="email" class="form-control" placeholder="Enter your email">
        </div>
        
        <div class="form-group">
          <label for="message">Your Feedback</label>
          <textarea id="message" name="message" class="form-control" placeholder="Please share your thoughts, suggestions, or report any issues..." required></textarea>
        </div>
        
        <button type="submit" class="submit-feedback">Send Feedback</button>
        
        <div id="formStatus" class="form-status"></div>
      </form>
      </div>
    </section>

    <div class="button-container">
        <a href="{% url 'index' %}" class='back-button'>
            <i class="fas fa-arrow-left"></i> Back to Home
        </a>
        <a href="{% url 'mcq_hub' %}" class='back-button'>
            <i class="fas fa-arrow-left"></i> Back to Previous Page
        </a>
    </div>
  </main>

{% endblock %}

{% block extra_js %}
<script>
  // Configure MathJax before loading the script
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']]
    },
    svg: {
      fontCache: 'global'
    },
    startup: {
      pageReady: () => {
        return MathJax.startup.defaultPageReady().then(() => {
          // Re-render MathJax after dynamic content loads
          if (window.contentRendered) {
            MathJax.typesetPromise();
          }
        });
      }
    }
  };
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>




  <script>
  // ----------------------------
  // Utilities
  // ----------------------------
  const EXAM_SIZE = 10;
  const EXAM_MINUTES = 10; // minutes
  const STORAGE_KEY = 'narration_exam_state_v2';
  const qs = (sel, el=document) => el.querySelector(sel);
  const qsa = (sel, el=document) => [...el.querySelectorAll(sel)];
  const pick = (arr, n) => {
    // Fisher-Yates shuffle algorithm for proper randomization
    const shuffled = [...arr];
    for (let i = shuffled.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    return shuffled.slice(0, n);
  };
  function formatTime(s){ const m = Math.floor(s/60).toString().padStart(2,'0'); const r = Math.floor(s%60).toString().padStart(2,'0'); return `${m}:${r}`; }
  function saveState(state){ sessionStorage.setItem(STORAGE_KEY, JSON.stringify(state)); }
  function loadState(){ try{ return JSON.parse(sessionStorage.getItem(STORAGE_KEY)||'null'); }catch{return null} }
  function clearState(){ sessionStorage.removeItem(STORAGE_KEY); }

  // ----------------------------
  // Question Pool
  // ----------------------------


const QUESTIONS = [
  {
    id:1,
    q: "<span>Pick the correct part to fill the gap of the following sentence --<br>Each of the sons followed __ father's trade</span><span class='bcs-tag'>33th BCS</span>",
    options: ["their", "her", "whose", "his"],
    answer: 3,
    explain: "Answer --(D) <br> 'each of the sons' ‡¶è‡¶∞ each ‡¶è‡¶ï‡¶¨‡¶ö‡¶®, ‡¶§‡¶æ‡¶á ‡¶è‡¶∞ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡ßá his/her ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü‡•§ ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ 'son' masculine ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶®‡ßá his ‡¶≤‡¶ø‡¶ñ‡¶§‡ßá ‡¶π‡¶¨‡ßá"
  },
  {
    id:2,
    q: "<span>'He was a rather disagreeable man.' Here the word 'disagreeable' is a/an --</span><span class='bcs-tag'>35th BCS</span>",
    options: ["Noun", "Adjective", "Adverb", "Preposition"],
    answer: 1,
    explain: "Answer --(B) <br> Disagreeable ‡¶Æ‡¶æ‡¶®‡ßá ‡¶¨‡¶ø‡¶¨‡¶æ‡¶¶‡¶Æ‡¶æ‡¶® ‡¶¨‡¶æ ‡¶¨‡¶ø‡¶∏‡¶¶‡ßÉ‡¶∂‡•§ ‡¶è‡¶ü‡¶ø ‡¶è‡¶ï‡¶ü‡¶ø adjective. ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ ‡¶∂‡¶¨‡ßç‡¶¶‡ßá‡¶∞ ‡¶∂‡ßá‡¶∑‡ßá able,ate,ain,ry,ous ‡¶á‡¶§‡ßç‡¶Ø‡¶æ‡¶¶‡¶ø ‡¶∂‡¶¨‡ßç‡¶¶‡¶æ‡¶Ç‡¶∂ ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶π‡¶≤‡ßá ‡¶∂‡¶¨‡ßç‡¶¶‡¶ü‡¶ø adjective ‡¶π‡ßü‡•§"
  },
  {
    id: 3,
    q: "<span>'by and large' means--</span><span class='bcs-tag'>44th BCS</span>",
    options: ["everywhere", "very large", "mostly", "far away"],
    answer: 2,
    explain: "Answer --(B) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: 'by and large' ‡¶Ö‡¶∞‡ßç‡¶• ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶®‡¶§ ‡¶¨‡¶æ ‡¶Æ‡ßÇ‡¶≤‡¶§, 'mostly' ‡¶Ö‡¶∞‡ßç‡¶• ‡¶Ö‡¶ß‡¶ø‡¶ï‡¶æ‡¶Ç‡¶∂ ‡¶ï‡ßç‡¶∑‡ßá‡¶§‡ßç‡¶∞‡ßá ‡¶¨‡¶æ ‡¶Ö‡¶ß‡¶ø‡¶ï‡¶æ‡¶Ç‡¶∂‡ßá <br> 'very large ‡¶Æ‡¶æ‡¶®‡ßá ‡¶π‡¶≤-‡¶ñ‡ßÅ‡¶¨ ‡¶¨‡¶°‡¶º,far away ‡¶Æ‡¶æ‡¶®‡ßá ‡¶¶‡ßÇ‡¶∞‡ßá‡•§ ‡¶∏‡ßÅ‡¶§‡¶∞‡¶æ‡¶Ç 'by and large' ‡¶Æ‡¶æ‡¶®‡ßá ‡¶π‡¶≤-'mostly'  "
  },
  {
    id:4,
    q: "<span> What is the plural form of 'Sheep'?</span><span class='bcs-tag'>44th BCS</span>",
    options: ["Sheeps", "Sheep", "Sheepses", "Sheepen"],
    answer: 1,
    explain: "Answer --(B) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: 'Sheep' ‡¶è‡¶∞ ‡¶¨‡¶π‡ßÅ‡¶¨‡¶ö‡¶®‡¶ì 'Sheep'‡•§ ‡¶è‡¶ü‡¶ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ö‡¶∏‡ßç‡¶¨‡¶æ‡¶≠‡¶æ‡¶¨‡¶ø‡¶ï ‡¶¨‡¶π‡ßÅ‡¶¨‡¶ö‡¶®‡•§ "
  },
  {
    id:5,
    q: "<span> 'to get along with' means--</span><span class='bcs-tag'>44th BCS</span>",
    options: ["to adjust", "to interest", "to accompany", "to walk"],
    answer: 0,
    explain: "Answer --(A) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: 'to get along with' ‡¶è‡¶∞ ‡¶Ö‡¶∞‡ßç‡¶• ‡¶π‡¶≤ 'to adjust' ‡¶¨‡¶æ '‡¶Æ‡¶ø‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶ö‡¶≤‡¶æ'‡•§ "
  },
  {
    id:6,
    q: "<span>What kind of noun is 'river'</span><span class='bcs-tag'>44th BCS</span>",
    options: ["Common noun", "Proper noun", "Collective noun", "Abstract noun"],
    answer: 0,
    explain: "Answer --(A) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: 'river' common  noun ‡¶ï‡¶æ‡¶∞‡¶® river ‡¶¶‡ßç‡¶¨‡¶æ‡¶∞‡¶æ ‡¶ï‡ßã‡¶® ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü river ‡¶ï‡ßá ‡¶¨‡ßÅ‡¶ù‡¶æ‡¶®‡ßã ‡¶π‡ßü ‡¶®‡¶ø‡•§ ‡¶§‡¶æ‡¶õ‡¶æ‡ßú‡¶æ ‡¶ï‡ßã‡¶® ‡¶∂‡¶¨‡ßç‡¶¶ ‡¶Ø‡¶ñ‡¶® ‡¶è‡¶ï‡¶ú‡¶æ‡¶§‡ßÄ‡ßü ‡¶™‡ßç‡¶∞‡¶æ‡¶£‡ßÄ ‡¶ì ‡¶¨‡¶∏‡ßç‡¶§‡ßÅ‡¶∞ ‡¶∏‡¶ï‡¶≤‡¶ï‡ßá‡¶á ‡¶¨‡ßÅ‡¶ù‡¶æ‡ßü ‡¶§‡¶ñ‡¶® ‡¶§‡¶æ‡¶ï‡ßá Common Noun ‡¶¨‡¶≤‡ßá‡•§"
  },
  {
    id:7,
    q: "<span>Fill in the blank: 'She went to New Market__'</span><span class='bcs-tag'>43th BCS</span>",
    options: ["on feet", "by foot", "by walking","on foot"],
    answer: 3,
    explain: "Answer --(D) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: <br> ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ ‡¶ï‡ßã‡¶® ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ‡ßü ‡¶™‡¶æ‡ßü‡ßá ‡¶π‡ßá‡¶Å‡¶ü‡ßá ‡¶Ø‡¶æ‡¶ì‡ßü‡¶æ ‡¶¨‡ßÅ‡¶ù‡¶æ‡¶§‡ßá 'on foot' ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡•§ <br> ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶¶‡¶ø‡¶ï‡ßá 'by' ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ ‡¶™‡¶∞‡¶ø‡¶¨‡¶π‡¶®‡ßá‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá (‡¶Ø‡ßá‡¶Æ‡¶®‡¶É ‡¶ü‡ßç‡¶∞‡ßá‡¶®, ‡¶ó‡¶æ‡ßú‡¶ø, ‡¶®‡ßå‡¶ï‡¶æ, ‡¶™‡ßç‡¶≤‡ßá‡¶® ‡¶á‡¶§‡ßç‡¶Ø‡¶æ‡¶¶‡¶ø) ‡¶ï‡ßã‡¶•‡¶æ‡¶ì ‡¶Ø‡¶æ‡¶ì‡ßü‡¶æ ‡¶¨‡ßÅ‡¶ù‡¶æ‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶π‡ßü‡•§ ‡¶§‡¶æ‡¶á 'by foot' ‡¶π‡¶¨‡ßá ‡¶®‡¶æ‡•§ <br> ‡¶Ü‡¶¨‡¶æ‡¶∞, 'walking' ‡¶∂‡¶¨‡ßç‡¶¶‡¶ü‡¶ø gerund ‡¶¨‡¶æ present participle, ‡¶§‡¶æ‡¶á ‡¶è‡¶∞ ‡¶Ü‡¶ó‡ßá 'by' ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶®‡ßü‡•§ "
  },
  {
    id:8,
    q: "<span>Fill in the gap: 'Birds fly __ in the sky.'</span><span class='bcs-tag'>43th BCS</span>",
    options: ["random", "at large", "at a stitch","are long"],
    answer: 1,
    explain: "Answer--(B) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: 'at large' ‡¶Ö‡¶∞‡ßç‡¶• '‡¶Æ‡ßÅ‡¶ï‡ßç‡¶§‡¶≠‡¶æ‡¶¨‡ßá' ‡¶¨‡¶æ '‡¶¨‡¶ø‡¶®‡¶æ ‡¶¨‡¶æ‡¶ß‡¶æ‡ßü'‡•§ <br> ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶¶‡¶ø‡¶ï‡ßá, 'random' ‡¶Ö‡¶∞‡ßç‡¶• '‡¶Ø‡ßá ‡¶ï‡ßã‡¶®‡¶≠‡¶æ‡¶¨‡ßá'<br> 'at a stitch' ‡¶Ö‡¶∞‡ßç‡¶• '‡¶è‡¶ï‡¶ü‡¶æ‡¶®‡¶æ' ‡¶¨‡¶æ '‡¶¨‡¶ø‡¶∞‡¶§‡¶ø‡¶π‡ßÄ‡¶®‡¶≠‡¶æ‡¶¨‡ßá'<br> 'are long' ‡¶Ö‡¶∞‡ßç‡¶• '‡¶¶‡ßÄ‡¶∞‡ßç‡¶ò'‡•§ <br> ‡¶∏‡ßÅ‡¶§‡¶∞‡¶æ‡¶Ç Birds fly at large in the sky. ‡¶Ö‡¶∞‡ßç‡¶• ‡¶™‡¶æ‡¶ñ‡¶ø‡¶∞‡¶æ ‡¶Ü‡¶ï‡¶æ‡¶∂‡ßá ‡¶Æ‡ßÅ‡¶ï‡ßç‡¶§‡¶≠‡¶æ‡¶¨‡ßá ‡¶â‡ßú‡ßá„ÄÇ" 
  },
  {
    id:9,
    q: "<span>'To doctor an animal' means--</span><span class='bcs-tag'>42th BCS</span>",
    options: ["to treat it", "to sterilize it", "to poison it","to cure it"],
    answer: 1,
    explain: "Answer--(B) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: 'to doctor an animal' ‡¶è‡¶∞ ‡¶Ö‡¶∞‡ßç‡¶• ‡¶π‡¶≤ 'to sterilize it' ‡¶¨‡¶æ '‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶æ‡¶£‡ßÄ‡¶ï‡ßá ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡ßÄ‡¶ú‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ'‡•§ <br> ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶¶‡¶ø‡¶ï‡ßá, 'to treat it' ‡¶Ö‡¶∞‡ßç‡¶• '‡¶è‡¶ü‡¶ø ‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ ‡¶ï‡¶∞‡¶æ', 'to poison it' ‡¶Ö‡¶∞‡ßç‡¶• '‡¶è‡¶ü‡¶ø ‡¶¨‡¶ø‡¶∑‡¶æ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ', ‡¶è‡¶¨‡¶Ç 'to cure it' ‡¶Ö‡¶∞‡ßç‡¶• '‡¶è‡¶ü‡¶ø ‡¶®‡¶ø‡¶∞‡¶æ‡¶Æ‡¶Ø‡¶º ‡¶ï‡¶∞‡¶æ'‡•§ <br> ‡¶∏‡ßÅ‡¶§‡¶∞‡¶æ‡¶Ç ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶π‡¶≤ 'to sterilize it'‡•§"
  },
  {
    id:10,
    q: "<span>Identify the determiner in the sentence 'Bring me that book'</span><span class='bcs-tag'>42th BCS</span>",
    options: ["bring", "me", "that","book"],
    answer: 2,
    explain: "Answer--(C) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: <br> ‡¶Ø‡ßá‡¶∏‡¶ï‡¶≤ ‡¶∂‡¶¨‡ßç‡¶¶ Noun ‡¶è‡¶∞ ‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡ßá ‡¶¨‡¶∏‡ßá Noun ‡¶è‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü‡¶§‡¶æ, ‡¶Ö‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü‡¶§‡¶æ, ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£, ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶á‡¶§‡ßç‡¶Ø‡¶æ‡¶¶‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂ ‡¶ï‡¶∞‡ßá, ‡¶§‡¶æ‡¶ï‡ßá determiner ‡¶¨‡¶≤‡ßá‡•§ 'That' ‡¶π‡¶≤ demonstrative determiner. Demonstrative pronoun ‡¶ó‡ßÅ‡¶≤‡ßã ‡¶Ø‡ßá‡¶Æ‡¶®- this,that,these,those ‡¶π‡¶≤ demonstrative determiner. <br> ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶¶‡¶ø‡¶ï‡ßá, 'bring' ‡¶è‡¶ï‡¶ü‡¶ø verb, 'me' ‡¶è‡¶ï‡¶ü‡¶ø pronoun, ‡¶è‡¶¨‡¶Ç 'book' ‡¶è‡¶ï‡¶ü‡¶ø noun‡•§ ‡¶∏‡ßÅ‡¶§‡¶∞‡¶æ‡¶Ç ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶π‡¶≤ 'that'‡•§"
  },
  {
    id:11,
    q: "<span>What is the noun form of the word 'know'?</span><span class='bcs-tag'>41th BCS</span>",
    options: ["knowing", "knowledge", "knowledgeable","known"],
    answer: 1,
    explain: "Answer--(B) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: 'know' ‡¶è‡¶∞ noun form ‡¶π‡¶≤ 'knowledge'‡•§ 'knowing' ‡¶π‡¶≤ gerund ‡¶¨‡¶æ present participle, 'knowledgeable' ‡¶π‡¶≤ adjective, ‡¶è‡¶¨‡¶Ç 'known' ‡¶π‡¶≤ past participle‡•§ ‡¶∏‡ßÅ‡¶§‡¶∞‡¶æ‡¶Ç ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶π‡¶≤ 'knowledge'‡•§"
  },
  {
    id:12,
    q: "<span>Identify the word that can be used as both singular and plural:</span><span class='bcs-tag'>41th BCS</span>",
    options: ["wood", "issue", "fish","light"],
    answer: 2,
    explain: "Answer--(C) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: 'fish' ‡¶∂‡¶¨‡ßç‡¶¶‡¶ü‡¶ø ‡¶è‡¶ï‡¶¨‡¶ö‡¶® ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶π‡ßÅ‡¶¨‡¶ö‡¶® ‡¶â‡¶≠‡¶Ø‡¶º ‡¶ï‡ßç‡¶∑‡ßá‡¶§‡ßç‡¶∞‡ßá‡¶á ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡¶Ø‡¶º‡•§ ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£‡¶∏‡ßç‡¶¨‡¶∞‡ßÇ‡¶™, 'I caught a fish' (‡¶è‡¶ï‡¶¨‡¶ö‡¶®) ‡¶è‡¶¨‡¶Ç 'I caught three fish' (‡¶¨‡¶π‡ßÅ‡¶¨‡¶ö‡¶®)‡•§ ‡¶Ö‡¶®‡ßç‡¶Ø‡¶¶‡¶ø‡¶ï‡ßá, 'wood', 'issue', ‡¶è‡¶¨‡¶Ç 'light' ‡¶∂‡¶¨‡ßç‡¶¶‡¶ó‡ßÅ‡¶≤‡¶ø ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ ‡¶è‡¶ï‡¶¨‡¶ö‡¶® ‡¶¨‡¶æ ‡¶¨‡¶π‡ßÅ‡¶¨‡¶ö‡¶® ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡¶Ø‡¶º ‡¶®‡¶æ‡•§"
  },
  {
    id:13,
    q: "<span>Identify the determiner in the following sentence 'I have no news for you'</span><span class='bcs-tag'>40th BCS</span>",
    options: ["have", "news", "no","for"],
    answer: 2,
    explain: "Answer--(C) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: <br> ‡¶Ø‡ßá‡¶∏‡¶ï‡¶≤ ‡¶∂‡¶¨‡ßç‡¶¶ Noun ‡¶è‡¶∞ ‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡ßá ‡¶¨‡¶∏‡ßá Noun ‡¶è‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü‡¶§‡¶æ, ‡¶Ö‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü‡¶§‡¶æ, ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£, ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶á‡¶§‡ßç‡¶Ø‡¶æ‡¶¶‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂ ‡¶ï‡¶∞‡ßá, ‡¶§‡¶æ‡¶ï‡ßá determiner ‡¶¨‡¶≤‡ßá‡•§ 'No' ‡¶π‡¶≤ determiner ‡¶Ø‡¶æ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá 'news' ‡¶è‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂ ‡¶ï‡¶∞‡¶õ‡ßá‡•§ <br> ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶¶‡¶ø‡¶ï‡ßá, 'have' ‡¶è‡¶ï‡¶ü‡¶ø verb, 'news' ‡¶è‡¶ï‡¶ü‡¶ø noun, ‡¶è‡¶¨‡¶Ç 'for' ‡¶è‡¶ï‡¶ü‡¶ø preposition‡•§ ‡¶∏‡ßÅ‡¶§‡¶∞‡¶æ‡¶Ç ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶π‡¶≤ 'no'‡•§"
  },
  {
    id:14,
    q: "<span>He does not adhere __ any principle</span><span class='bcs-tag'>45th BCS</span>",
    options: ["by", "in", "at","to"],
    answer: 3,
    explain: "Answer--(D) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: 'adhere to' ‡¶è‡¶ï‡¶ü‡¶ø phrase ‡¶Ø‡¶æ‡¶∞ ‡¶Ö‡¶∞‡ßç‡¶• '‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶Æ‡ßá‡¶®‡ßá ‡¶ö‡¶≤‡¶æ' ‡¶¨‡¶æ '‡¶Ö‡¶®‡ßÅ‡¶∏‡¶∞‡¶£ ‡¶ï‡¶∞‡¶æ'‡•§ ‡¶§‡¶æ‡¶á ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶π‡¶≤ 'to'‡•§ <br> ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶¶‡¶ø‡¶ï‡ßá, 'by', 'in', ‡¶è‡¶¨‡¶Ç 'at' ‡¶è‡¶á context ‡¶è ‡¶∏‡¶†‡¶ø‡¶ï preposition ‡¶®‡¶Ø‡¶º‡•§"
  },
  {
  id:15,
  q: "<span>The passive form of the sentence 'Some children were helping the wounded man'__</span><span class='bcs-tag'>20th BCS</span>",
  options: ["The wonded man was helped by some children", "The wounded man was helping some children","The wounded man was being helped by some children","The wounded man was to be helped by some children"],
  answer: 2,
  explain: "Answer--(C) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: <br> 'Some children were helping the wounded man' ‡¶è‡¶∞ passive form ‡¶π‡¶≤ 'The wounded man was being helped by some children'‡•§ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá 'being helped' passive voice ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂ ‡¶ï‡¶∞‡ßá‡•§ <br> ‡¶Ö‡¶®‡ßç‡¶Ø‡¶¶‡¶ø‡¶ï‡ßá, 'The wounded man was helped by some children' ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶≠‡¶ø‡¶®‡ßç‡¶® ‡¶Ö‡¶∞‡ßç‡¶• ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂ ‡¶ï‡¶∞‡ßá‡•§ 'The wounded man was helping some children' ‡¶è‡¶¨‡¶Ç 'The wounded man was to be helped by some children' ‡¶è‡¶á ‡¶¶‡ßÅ‡¶ü‡¶ø ‡¶Ö‡¶™‡¶∂‡¶®‡¶ì ‡¶∏‡¶†‡¶ø‡¶ï ‡¶®‡¶Ø‡¶º‡•§"
  },
  {
    id:16,
    q: "<span>'To read between the lines' means--</span><span class='bcs-tag'>17th BCS</span>", 
    options: ["to read carefully", "to read only some lines", "to read quickly to save times","to read carefully to find out any hidden meaning"],
    answer: 3,
    explain: "Answer--(D) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: 'To read between the lines' ‡¶è‡¶∞ ‡¶Ö‡¶∞‡ßç‡¶• ‡¶π‡¶≤ '‡¶ó‡ßã‡¶™‡¶® ‡¶¨‡¶æ ‡¶Ö‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂‡¶ø‡¶§ ‡¶Ö‡¶∞‡ßç‡¶• ‡¶¨‡ßã‡¶ù‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡¶®‡ßã‡¶Ø‡ßã‡¶ó ‡¶∏‡¶π‡¶ï‡¶æ‡¶∞‡ßá ‡¶™‡¶°‡¶º‡¶æ'‡•§ ‡¶∏‡ßÅ‡¶§‡¶∞‡¶æ‡¶Ç ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶π‡¶≤ 'to read carefully to find out any hidden meaning'‡•§"
  },
  {
    id:17,
    q: "<span>A fantasy is --</span><span class='bcs-tag'>16th BCS</span>",
    options: ["an imaginary story", "a funny film", "a history record", "a real-life event"],
    answer: 0,
    explain: "Answer--(A) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: 'A fantasy' ‡¶π‡¶≤ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ï‡¶æ‡¶≤‡ßç‡¶™‡¶®‡¶ø‡¶ï ‡¶ó‡¶≤‡ßç‡¶™ ‡¶Ø‡¶æ ‡¶¨‡¶æ‡¶∏‡ßç‡¶§‡¶¨‡¶§‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶á‡¶∞‡ßá‡•§ ‡¶∏‡ßÅ‡¶§‡¶∞‡¶æ‡¶Ç ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶π‡¶≤ 'an imaginary story'‡•§"
  },
  {
    id:18,
    q: "<span>Which of the following is a correct sentence?</span><span class='bcs-tag'>15th BCS</span>",
    options: ["He was too clever not to miss the point","He was so clever to miss the point","He was too clever to miss the point","He was clever to grasp the point"],
    answer: 2,
    explain: "Answer--(C) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: 'He was too clever to miss the point' ‡¶è‡¶á ‡¶¨‡¶æ‡¶ï‡ßç‡¶Ø‡¶ü‡¶ø ‡¶∏‡¶†‡¶ø‡¶ï‡•§ ‡¶è‡¶∞ ‡¶Æ‡¶æ‡¶®‡ßá ‡¶π‡¶≤ ‡¶Ø‡ßá ‡¶∏‡ßá ‡¶è‡¶§ ‡¶¨‡ßÅ‡¶¶‡ßç‡¶ß‡¶ø‡¶Æ‡¶æ‡¶® ‡¶õ‡¶ø‡¶≤ ‡¶Ø‡ßá ‡¶∏‡ßá ‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º‡¶ü‡¶ø ‡¶Æ‡¶ø‡¶∏ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®‡¶ø‡•§ ‡¶Ö‡¶®‡ßç‡¶Ø‡¶¶‡¶ø‡¶ï‡ßá, ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶¨‡¶æ‡¶ï‡ßç‡¶Ø‡¶ó‡ßÅ‡¶≤‡¶ø ‡¶∏‡¶†‡¶ø‡¶ï ‡¶®‡¶Ø‡¶º‡•§"
  },
  {
    id:19,
    q: "<span>Are you doing anything special __ the week-end?</span><span class='bcs-tag'>15th BCS</span>",
    options: ["in", "for", "on", "at"],
    answer: 3,
    explain: "Answer--(D) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: 'at the weekend' ‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶ö‡¶≤‡¶ø‡¶§ phrase ‡¶Ø‡¶æ ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π‡¶æ‡¶®‡ßç‡¶§‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡¶Ø‡¶º‡•§ ‡¶∏‡ßÅ‡¶§‡¶∞‡¶æ‡¶Ç ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶π‡¶≤ 'at'‡•§"
  },
  {
    id:20,
    q: "<span>Trying unitedly we were able to have our project approved against strong oppositions.<br> Which of the following says nearly the same as 'against' above?</span><span class='bcs-tag'>14th BCS</span>",
    options: ["in the wake of", "in the guise of", "in the plea of", "in the teeth of"],
    answer: 3,
    explain: "Answer--(D) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: 'in the teeth of' ‡¶Ö‡¶∞‡ßç‡¶• '‡¶¨‡¶ø‡¶∞‡ßÅ‡¶¶‡ßç‡¶ß' ‡¶¨‡¶æ '‡¶¨‡¶ø‡¶™‡¶∞‡ßÄ‡¶§‡ßá'‡•§ ‡¶è‡¶ü‡¶ø 'against' ‡¶è‡¶∞ ‡¶∏‡¶Æ‡¶æ‡¶∞‡ßç‡¶•‡¶ï‡•§ ‡¶Ö‡¶®‡ßç‡¶Ø‡¶¶‡¶ø‡¶ï‡ßá, 'in the wake of' ‡¶Ö‡¶∞‡ßç‡¶• '‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ‡¶§‡ßá', 'in the guise of' ‡¶Ö‡¶∞‡ßç‡¶• '‡¶õ‡¶¶‡ßç‡¶Æ‡¶¨‡ßá‡¶∂‡ßá', ‡¶è‡¶¨‡¶Ç 'in the plea of' ‡¶Ö‡¶∞‡ßç‡¶• '‡¶Ö‡¶∞‡ßç‡¶ú‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø'‡•§ ‡¶∏‡ßÅ‡¶§‡¶∞‡¶æ‡¶Ç ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶π‡¶≤ 'in the teeth of'‡•§"
  },
  {
    id:21,
    q: "<span>Which phrase contains words opposed to each other in meaning?</span><span class='bcs-tag'>23th BCS</span>",
    options: ["Hopes and aspirations", "Heat and dust", "Reproduction and death", "Emerged and advanced"],
    answer: 2,
    explain: "Answer--(C) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: 'Reproduction and death' ‡¶è‡¶á phrase ‡¶è 'reproduction' ‡¶è‡¶¨‡¶Ç 'death' ‡¶∂‡¶¨‡ßç‡¶¶ ‡¶¶‡ßÅ‡¶ü‡¶ø ‡¶™‡¶∞‡¶∏‡ßç‡¶™‡¶∞‡ßá‡¶∞ ‡¶¨‡¶ø‡¶™‡¶∞‡ßÄ‡¶§ ‡¶Ö‡¶∞‡ßç‡¶• ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂ ‡¶ï‡¶∞‡ßá‡•§ ‡¶Ö‡¶®‡ßç‡¶Ø‡¶¶‡¶ø‡¶ï‡ßá, ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø phrase ‡¶ó‡ßÅ‡¶≤‡ßã‡¶§‡ßá ‡¶è‡¶Æ‡¶® ‡¶ï‡ßã‡¶® ‡¶∂‡¶¨‡ßç‡¶¶ ‡¶®‡ßá‡¶á ‡¶Ø‡¶æ ‡¶™‡¶∞‡¶∏‡ßç‡¶™‡¶∞‡ßá‡¶∞ ‡¶¨‡¶ø‡¶™‡¶∞‡ßÄ‡¶§ ‡¶Ö‡¶∞‡ßç‡¶• ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂ ‡¶ï‡¶∞‡ßá‡•§ ‡¶∏‡ßÅ‡¶§‡¶∞‡¶æ‡¶Ç ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶π‡¶≤ 'Reproduction and death'‡•§"
  },
  {
    id:22,
    q: "<span>The synonym for 'Obdurate' --</span><span class='bcs-tag'>24th BCS</span>",
    options: ["Deceitful", "Stubborn", "Sly", "Swindler"],
    answer: 1,
    explain: "Answer--(B) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ: 'Obdurate' ‡¶è‡¶∞ ‡¶Ö‡¶∞‡ßç‡¶• ‡¶π‡¶≤ '‡¶Ö‡¶¨‡¶ø‡¶ö‡¶≤‡¶ø‡¶§' ‡¶¨‡¶æ '‡¶¶‡ßÉ‡¶¢‡¶º'‡•§ ‡¶è‡¶∞ ‡¶∏‡¶Æ‡¶æ‡¶∞‡ßç‡¶•‡¶ï ‡¶∂‡¶¨‡ßç‡¶¶ ‡¶π‡¶≤ 'Stubborn'‡•§ ‡¶Ö‡¶®‡ßç‡¶Ø‡¶¶‡¶ø‡¶ï‡ßá, 'Deceitful' ‡¶è‡¶∞ ‡¶Ö‡¶∞‡ßç‡¶• ‡¶π‡¶≤ '‡¶™‡ßç‡¶∞‡¶§‡¶æ‡¶∞‡¶£‡¶æ‡¶Æ‡ßÇ‡¶≤‡¶ï', 'Sly' ‡¶è‡¶∞ ‡¶Ö‡¶∞‡ßç‡¶• ‡¶π‡¶≤ '‡¶ö‡¶§‡ßÅ‡¶∞', ‡¶è‡¶¨‡¶Ç 'Swindler' ‡¶è‡¶∞ ‡¶Ö‡¶∞‡ßç‡¶• ‡¶π‡¶≤ '‡¶™‡ßç‡¶∞‡¶§‡¶æ‡¶∞‡¶£‡¶æ‡¶ï‡¶æ‡¶∞‡ßÄ'‡•§ ‡¶∏‡ßÅ‡¶§‡¶∞‡¶æ‡¶Ç ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶π‡¶≤ 'Stubborn'‡•§"
  },
  {
    id:23,
    q: "<span>Water boils __ you heat it to $100^\\circ$ Centigrade.</span><span class='bcs-tag'>24th BCS</span>",
    options: ["unless", "untill", "if", "although"],
    answer: 2,
    explain: "Answer--(C) <br> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ‡¶É ‡¶è‡¶ü‡¶ø ‡¶è‡¶ï‡¶ü‡¶ø zero conditional sentence‡•§ Zero conditional sentence ‡¶è 'if' ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü ‡¶Ø‡ßá‡¶ñ‡¶æ‡¶®‡ßá, if ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ clause ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶™‡¶∞ clause ‡¶â‡¶≠‡ßü‡¶á Present Indefinite tense ‡¶è‡¶∞ ‡¶π‡ßü‡•§ ‡¶¨‡ßà‡¶ú‡ßç‡¶û‡¶æ‡¶®‡¶ø‡¶ï ‡¶∏‡¶§‡ßç‡¶§,‡¶ö‡¶ø‡¶∞‡¶®‡ßç‡¶§‡¶® ‡¶∏‡¶§‡ßç‡¶Ø ‡¶á‡¶§‡ßç‡¶Ø‡¶æ‡¶¶‡¶ø ‡¶ï‡ßç‡¶∑‡ßá‡¶§‡ßç‡¶∞‡ßá zero conditional sentence ‡¶π‡ßü‡•§ ‡¶∏‡ßÅ‡¶§‡¶∞‡¶æ‡¶Ç ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶π‡¶≤ 'if'‡•§ <br> ‡¶Ö‡¶®‡ßç‡¶Ø‡¶¶‡¶ø‡¶ï‡ßá, 'unless' ‡¶Ö‡¶∞‡ßç‡¶• '‡¶Ø‡¶¶‡¶ø ‡¶®‡¶æ', 'until' ‡¶Ö‡¶∞‡ßç‡¶• '‡¶Ø‡¶§‡¶ï‡ßç‡¶∑‡¶£ ‡¶®‡¶æ', ‡¶è‡¶¨‡¶Ç 'although' ‡¶Ö‡¶∞‡ßç‡¶• '‡¶Ø‡¶¶‡¶ø‡¶ì'‡•§ ‡¶è‡¶á ‡¶∂‡¶¨‡ßç‡¶¶‡¶ó‡ßÅ‡¶≤‡¶ø ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡ßç‡¶∞‡¶Ø‡ßã‡¶ú‡ßç‡¶Ø ‡¶®‡¶Ø‡¶º‡•§"
  }, 
  {
    id:24,
    q: "<span>I finally killed the fly __ a rolled up newspaper.</span><span class='bcs-tag'>25th BCS</span>",
    options: ["by", "with", "through", "from"],
    answer: 1,
    explain: "Answer--(B) <br> 'by' ‡¶∂‡¶¨‡ßç‡¶¶‡¶ü‡¶ø ‡¶¨‡ßã‡¶ù‡¶æ‡ßü ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ ‡¶ò‡¶ü‡¶®‡¶æ‡¶ü‡¶ø ‡¶¨‡ßÅ‡¶ù‡¶æ‡¶§‡ßá, ‡¶Ü‡¶∞ 'with' ‡¶¨‡¶∏‡ßá ‡¶ï‡ßã‡¶® tool ‡¶¨‡¶æ ‡¶¨‡¶∏‡ßç‡¶§‡ßÅ ‡¶¨‡ßÅ‡¶ù‡¶æ‡¶§‡ßá‡•§ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Æ‡¶æ‡¶õ‡¶ø‡¶ü‡¶æ ‡¶ï‡ßÄ ‡¶¶‡ßç‡¶¨‡¶æ‡¶∞‡¶æ ‡¶Æ‡¶æ‡¶∞‡¶æ ‡¶π‡¶≤ ‡¶∏‡ßá‡¶ü‡¶æ ‡¶¨‡ßÅ‡¶ù‡¶æ‡¶ö‡ßç‡¶õ‡ßá‡•§ ‡¶è‡¶ú‡¶®‡ßç‡¶Ø 'with a rolled up newspaper' ‡¶π‡¶¨‡ßá‡•§"
  },
  {
    id:25,
    q: "<span>Travellers ___ their reservation will in advance if they want to visit the St.Martins island.</span><span class='bcs-tag'>32th BCS</span>",
    options: ["had better to get", "had to better get", "had better get", "had better got"],
    answer: 2,
    explain: "Answer--(C) <br> had better ‡¶è‡¶∞ ‡¶Æ‡¶æ‡¶ù‡ßá preposition ‡¶¨‡¶∏‡ßá ‡¶®‡¶æ‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ had better ‡¶è‡¶∞ immediate ‡¶™‡¶∞‡ßá‡¶∞ word ‡¶ì preposition ‡¶π‡ßü ‡¶®‡¶æ‡•§ had better ‡¶è‡¶∞ ‡¶™‡¶∞‡ßá verb ‡¶è‡¶∞ base form ‡¶¨‡¶∏‡ßá‡•§"
  },
];



















   
  // ----------------------------
  // State
  // ----------------------------
  let selectedIds = [];
  let selectedMap = {}; // { qid: optionIndex }
  let endTime = null; // epoch seconds
  let submitted = false;
  let timerHandle = null;
  let currentScore = 0;
  let currentDetails = [];

  const examForm = qs('#exam');
  const startBtn = qs('#startBtn');
  const resetBtn = qs('#resetBtn');
  const submitBtn = qs('#submitBtn');
  const timerEl = qs('#timer');
  const summaryEl = qs('#summary');
  const introEl = qs('#intro');
  const markModal = qs('#markModal');
  const closeModalBtn = qs('.close-modal');
  const cancelMarkBtn = qs('#cancelMarkBtn');
  const submitMarkBtn = qs('#submitMarkBtn');
  const studentNameInput = qs('#studentName');
  const rankingBtn = qs('#rankingBtn');  // ‡¶è‡¶á line ‡¶ü‡¶ø add ‡¶ï‡¶∞‡ßÅ‡¶®


  // ----------------------------
  // Rendering
  // ----------------------------
  async function renderQuestions(){
    examForm.innerHTML = '';
    const chosen = QUESTIONS.filter(q=>selectedIds.includes(q.id));
    chosen.forEach((q,idx)=>{
      const qWrap = document.createElement('section');
      qWrap.className = 'question';
      qWrap.setAttribute('data-qid', q.id);

      qWrap.innerHTML = `
        <div class="q-head">
          <div class="q-num">${idx+1}</div>
          <div class="q-text">${q.q}</div>
        </div>
        <div class="options" role="radiogroup" aria-label="Question ${idx+1}">
          ${q.options.map((opt,i)=>{
            const checked = selectedMap[q.id] === i ? 'checked' : '';
            return `
              <label class="option">
                <input type="radio" name="q_${q.id}" value="${i}" ${checked} aria-label="Option ${String.fromCharCode(65+i)}">
                <div class="opt-text"><strong>(${String.fromCharCode(65+i)})</strong> ${opt}</div>
              </label>
            `;}).join('')}
        </div>
      `;
      examForm.appendChild(qWrap);
    });

    qsa('input[type=radio]', examForm).forEach(inp=>{
      inp.addEventListener('change', e=>{
        const qid = parseInt(e.target.name.split('_')[1],10);
        selectedMap[qid] = parseInt(e.target.value,10);
        persist();
      });
    });

    // Typeset the new content
    if(window.MathJax) {
      window.contentRendered = true;
      await MathJax.typesetPromise();
    }
  }

  function renderSummary(score, details){
    const total = EXAM_SIZE;
    const correct = details.filter(d=>d.correct).length;
    const wrong = details.filter(d=>d.user!==null && !d.correct).length;
    const unanswered = total - correct - wrong;

    summaryEl.classList.remove('hidden');
    summaryEl.innerHTML = `
      <div style="display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap">
        <div style="display:flex; gap:12px; align-items:center">
          <span class="score-badge" title="Final Score">Score: ${score.toFixed(2)} / ${total.toFixed(2)}</span>
          <span class="chip correct-chip">‚úÖ ${correct} correct</span>
          <span class="chip wrong-chip">‚ùå ${wrong} wrong</span>
          <span class="chip unanswered-chip">‚è≥ ${unanswered} unanswered</span>
        </div>
        <div>
          <button id="submitMarkButton" class="primary" style="margin-right: 8px;">Submit Mark</button>
          <button onclick="window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'})">Go to Bottom</button>
        </div>
      </div>
    `;
    // Add event listener to the new button
    qs('#submitMarkButton').addEventListener('click', showMarkModal);
  }

  async function markReview(details){
    details.forEach((d)=>{
      const sec = qs(`.question[data-qid="${d.id}"]`);
      if(!sec) return;
      const labels = qsa('.option', sec);
      labels.forEach((lbl, idx)=>{
        lbl.classList.remove('correct','wrong');
        const inp = lbl.querySelector('input');
        if(d.user===null) return; // unanswered
        if(idx===d.answer) lbl.classList.add('correct');
        if(d.user===idx && idx!==d.answer) lbl.classList.add('wrong');
      });

      // Explanation
      let expEl = sec.querySelector('.explanation-container');
      if(!expEl){
        expEl = document.createElement('div');
        expEl.className = 'explanation-container';
        sec.appendChild(expEl);
      }
      const statusClass = d.user===null ? 'unanswered-status' : d.correct ? 'correct-status' : 'wrong-status';
      const statusText = d.user===null ? 'Unanswered' : d.correct ? 'Correct' : 'Wrong';
      expEl.innerHTML = `<div class="result-status ${statusClass}">${statusText}</div><p class="explain">${d.explain}</p>`;
    });

    // Typeset the new content
    if(window.MathJax) {
      await MathJax.typesetPromise();
    }
  }

  // ----------------------------
  // Exam Logic
  // ----------------------------
  function persist(){
    saveState({selectedIds, selectedMap, endTime, submitted});
  }

  function startExam(){
    introEl.classList.add('hidden');

    const shuffled = [...QUESTIONS];
    for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }

    selectedIds = shuffled.slice(0, EXAM_SIZE).map(q => q.id);
    selectedMap = {};
    submitted = false;
    endTime = Date.now() + EXAM_MINUTES * 60 * 1000;

    persist();
    renderQuestions();
    submitBtn.disabled = false;
    startTimer();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  function startTimer(){
    if(timerHandle) clearInterval(timerHandle);
    timerHandle = setInterval(()=>{
      const remaining = Math.floor((endTime - Date.now())/1000);
      if(remaining<=0){
        timerEl.textContent = "00:00";
        clearInterval(timerHandle);
        submitExam();
      } else {
        timerEl.textContent = formatTime(remaining);
      }
    }, 1000);
  }








  function submitExam() {
    if (submitted) return;
    submitted = true;
    clearInterval(timerHandle);

    // Exam details
    const currentDetails = selectedIds.map(qid => {
        const q = QUESTIONS.find(x => x.id === qid);
        const userAnswer = selectedMap[qid] !== undefined ? selectedMap[qid] : null;
        const correct = userAnswer === q.answer;
        return {
            id: qid,
            user: userAnswer,
            answer: q.answer,
            correct: correct,
            explain: q.explain
        };
    });

    // Calculate score
    const currentScore = currentDetails.reduce((acc, d) => {
        if (d.user === null) return acc;
        return acc + (d.correct ? 1 : -0.25);
    }, 0);

    // Render summary and mark review
    renderSummary(currentScore, currentDetails);
    markReview(currentDetails);

    // Disable submit button
    submitBtn.disabled = true;

    // Scroll to top
    window.scrollTo({ top: 0, behavior: 'smooth' });

    // --------------------------------
    // Check if user is logged in
    // --------------------------------
    const name = window.USERNAME || null; // Django template ‡¶•‡ßá‡¶ï‡ßá login user ‡¶è‡¶∞ name set ‡¶ï‡¶∞‡¶æ ‡¶•‡¶æ‡¶ï‡¶§‡ßá ‡¶π‡¶¨‡ßá, ‡¶®‡¶ø‡¶ö‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßã
    if (!name) {
        // Guest user ‚Üí ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ summary ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá, ‡¶ï‡ßã‡¶®‡ßã ‡¶°‡¶æ‡¶ü‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶¨‡ßá ‡¶®‡¶æ
        alert("You are not logged in. Your score will not be submitted to the server.");
        return;
    }

    // Logged-in user ‚Üí send data to backend
    const subject = "BCS English";
    const formData = new FormData();
    formData.append('studentName', name);
    formData.append('score', currentScore.toFixed(2));
    formData.append('total', EXAM_SIZE.toFixed(2));
    formData.append('percentage', ((currentScore / EXAM_SIZE) * 100).toFixed(2));
    formData.append('subject', subject);

    fetch("{% url 'submit_exam_result' %}", {
        method: 'POST',
        body: formData,
        headers: {
            'X-CSRFToken': getCookie('csrftoken'),
            'X-Requested-With': 'XMLHttpRequest'
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert('Your score has been submitted successfully!');
            hideMarkModal();
            // Redirect to ranking page
            //window.location.href = '/ranking/';
        } else {
            throw new Error(data.error || 'Failed to submit score');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('There was an error submitting your score. Please try again.');
    });
}










  /*
  function submitExam(){
    if(submitted) return;
    submitted = true;
    clearInterval(timerHandle);

    currentDetails = selectedIds.map(qid=>{
      const q = QUESTIONS.find(x=>x.id===qid);
      const user = selectedMap[qid]!==undefined ? selectedMap[qid] : null;
      const correct = user===q.answer;
      return {id:qid, user, answer:q.answer, correct, explain:q.explain};
    });

    currentScore = currentDetails.reduce((acc,d)=>{
      if(d.user===null) return acc;
      return acc + (d.correct?1:-0.25);
    },0);

    renderSummary(currentScore, currentDetails);
    markReview(currentDetails);
    submitBtn.disabled = true;
    persist();
    
    // Scroll to top after submitting
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }*/

  function resetExam(){
    clearState();
    location.reload();
  }

  // ----------------------------
  // Mark Submission Modal
  // ----------------------------
  function showMarkModal() {
    markModal.style.display = 'flex';
  }

  function hideMarkModal() {
    markModal.style.display = 'none';
    studentNameInput.value = '';
  }





  
  /* ‡¶è‡¶ü‡¶æ ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶è ‡¶®‡¶æ‡¶Æ ‡¶è‡¶¨‡¶Ç ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶ö‡¶≤‡ßá ‡¶Ü‡¶∏‡¶¨‡ßá‡•§ ‡¶è‡¶ñ‡¶® ‡¶Ü‡¶∞ ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞ ‡¶®‡¶æ‡¶á‡•§ ‡¶™‡¶∞‡ßá use ‡¶ï‡¶∞‡¶¨‡ßã , ‡¶Ø‡¶¶‡¶ø ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞ ‡¶π‡ßü‡•§ */
  /*
  function submitMark() {
    const name = studentNameInput.value.trim();
    if (!name) {
      alert('Please enter your name');
      return;
    }
    const subject = "Vector"; //   add ‡¶ï‡¶∞‡¶≤‡¶æ‡¶Æ ‡•§‡¶Ü‡¶ú‡¶ï‡ßá ‡ß® ‡¶∏‡ßá‡¶™‡ßç‡¶ü‡ßá‡¶Æ‡ßç‡¶¨‡¶∞
    // Prepare the data to send
    const formData = new FormData();
    formData.append('name', name);
    formData.append('score', currentScore.toFixed(2));
    formData.append('total', EXAM_SIZE.toFixed(2));
    formData.append('percentage', ((currentScore / EXAM_SIZE) * 100).toFixed(2) + '%');
    formData.append('subject', subject);
    
    // Send using Formspree
    fetch('https://formspree.io/f/xwpnvyaw', {
      method: 'POST',
      body: formData,
      headers: {
        'Accept': 'application/json'
      }
    })
    .then(response => {
      if (response.ok) {
        alert('Your score has been submitted successfully!');
        hideMarkModal();
      } else {
        throw new Error('Failed to submit score');
      }
    })
    .catch(error => {
      console.error('Error:', error);
      alert('There was an error submitting your score. Please try again.');
    });
  }*/ 










  // ----------------------------
  // Feedback Form Handling
  // ----------------------------
  function setupFeedbackForm() {
    const form = document.getElementById('feedbackForm');
    const statusEl = document.getElementById('formStatus');
    
    form.addEventListener('submit', function(e) {
      // Show loading state
      const submitButton = form.querySelector('button[type="submit"]');
      const originalText = submitButton.textContent;
      
      submitButton.disabled = true;
      submitButton.textContent = 'Sending...';
      statusEl.className = 'form-status';
      statusEl.textContent = 'Sending your feedback...';
      statusEl.style.display = 'block';
      
      // Allow the form to submit normally to Formspree
      // Formspree will handle the redirection to their thank you page
    });
    
    // Check if we're returning from Formspree submission
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('success')) {
      statusEl.textContent = 'Thank you for your feedback! We appreciate your input.';
      statusEl.className = 'form-status success';
      statusEl.style.display = 'block';
    }
  }

// ----------------------------
// Ranking Function
// ----------------------------
function goToRanking() {
    window.location.href = "{% url 'vec_mcq_rank' %}";
}


  // ----------------------------
  // Event Listeners
  // ----------------------------
  startBtn.addEventListener('click', startExam);
  submitBtn.addEventListener('click', submitExam);
  resetBtn.addEventListener('click', resetExam);
  closeModalBtn.addEventListener('click', hideMarkModal);
  cancelMarkBtn.addEventListener('click', hideMarkModal);
  submitMarkBtn.addEventListener('click', submitMark);
  rankingBtn.addEventListener('click', goToRanking);  // ‡¶è‡¶á line ‡¶ü‡¶ø add ‡¶ï‡¶∞‡ßÅ‡¶®


  // ----------------------------
  // Initialize
  // ----------------------------
  const state = loadState();
  if(state){
    selectedIds = state.selectedIds || [];
    selectedMap = state.selectedMap || {};
    endTime = state.endTime || null;
    submitted = state.submitted || false;
    if(selectedIds.length>0){
      introEl.classList.add('hidden');
      renderQuestions();
      if(!submitted){
        submitBtn.disabled = false;
        startTimer();
      } else {
        submitExam();
      }
    }
  }





   
//Exam Mark ‡¶¶‡¶ø‡ßü‡ßá Database ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶¨‡¶∂‡ßá‡¶∑‡ßá add ‡¶ï‡¶∞‡ßá‡¶õ‡¶ø‡•§
// ----------------------------
// Mark Submission to Django
// ----------------------------
/*   
function submitMark() {
    const name = studentNameInput.value.trim();
    if (!name) {
        alert('Please enter your name');
        return;
    }
    const subject = "Vector";
    // Prepare the data to send to Django
    const formData = new FormData();
    formData.append('studentName', name);
    formData.append('score', currentScore.toFixed(2));
    formData.append('total', EXAM_SIZE.toFixed(2));
    formData.append('percentage', ((currentScore / EXAM_SIZE) * 100).toFixed(2));
    formData.append('subject', subject);
    // Send to Django backend
    fetch("{% url 'submit_exam_result' %}", {
        method: 'POST',
        body: formData,
        headers: {
            'X-CSRFToken': getCookie('csrftoken'), // CSRF token handling
            'X-Requested-With': 'XMLHttpRequest'  // ‡¶è‡¶á line add ‡¶ï‡¶∞‡ßÅ‡¶®
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert('Your score has been submitted successfully!');
            hideMarkModal();
            
            // Redirect to ranking page
            window.location.href = '/ranking/'; //‡¶è‡¶ñ‡¶æ‡¶®‡ßá ranking ‡¶è‡¶∞ ‡¶ï‡¶æ‡¶ú ‡¶®‡¶æ‡¶á ‡¶§‡ßã‡•§
        } else {
            throw new Error(data.error || 'Failed to submit score');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('There was an error submitting your score. Please try again.');
    });
} */


  
  function submitMark() {
    const name = studentNameInput.value.trim();
    if (!name) {
      alert('Please enter your name');
      return;
    }
    const subject = "BCS English"; //   add ‡¶ï‡¶∞‡¶≤‡¶æ‡¶Æ ‡•§‡¶Ü‡¶ú‡¶ï‡ßá ‡ß® ‡¶∏‡ßá‡¶™‡ßç‡¶ü‡ßá‡¶Æ‡ßç‡¶¨‡¶∞
    // Prepare the data to send
    const formData = new FormData();
    formData.append('name', name);
    formData.append('score', currentScore.toFixed(2));
    formData.append('total', EXAM_SIZE.toFixed(2));
    formData.append('percentage', ((currentScore / EXAM_SIZE) * 100).toFixed(2) + '%');
    formData.append('subject', subject);
    
    // Send using Formspree
    fetch('https://formspree.io/f/xwpnvyaw', {
      method: 'POST',
      body: formData,
      headers: {
        'Accept': 'application/json'
      }
    })
    .then(response => {
      if (response.ok) {
        alert('Your score has been submitted successfully!');
        hideMarkModal();
      } else {
        throw new Error('Failed to submit score');
      }
    })
    .catch(error => {
      console.error('Error:', error);
      alert('There was an error submitting your score. Please try again.');
    });
  }




   

// CSRF token function
function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }                    
        }
    }
    return cookieValue;
}
            
// ----------------------------
// Event Listeners - Mark Modal
// ----------------------------
submitMarkBtn.addEventListener('click', submitMark);

// ----------------------------
// Feedback Form Handling
// ----------------------------
function setupFeedbackForm() {
    const form = document.getElementById('feedbackForm');
    const statusEl = document.getElementById('formStatus');
    
    form.addEventListener('submit', function(e) {
        // Show loading state
        const submitButton = form.querySelector('button[type="submit"]');
        const originalText = submitButton.textContent;
        
        submitButton.disabled = true;
        submitButton.textContent = 'Sending...';
        statusEl.className = 'form-status';
        statusEl.textContent = 'Sending your feedback...';
        statusEl.style.display = 'block';
        
        // Allow the form to submit normally to Formspree
        // Formspree will handle the redirection to their thank you page
    });
    
    // Check if we're returning from Formspree submission
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('success')) {
        statusEl.textContent = 'Thank you for your feedback! We appreciate your input.';
        statusEl.className = 'form-status success';
        statusEl.style.display = 'block';
    }
}















  // Setup feedback form
  setupFeedbackForm();
  </script>
{% endblock %}  

      